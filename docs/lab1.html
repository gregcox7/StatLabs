<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Lab 1 Exploring Data with R | Labs</title>
<meta name="author" content="Greg Cox">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.14/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/ims-style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Labs</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="active" href="lab1.html"><span class="header-section-number">1</span> Exploring Data with R</a></li>
<li><a class="" href="lab2.html"><span class="header-section-number">2</span> Sampling</a></li>
<li><a class="" href="lab3.html"><span class="header-section-number">3</span> Describing data</a></li>
<li><a class="" href="lab4.html"><span class="header-section-number">4</span> Relationships between numerical variables</a></li>
<li><a class="" href="lab5.html"><span class="header-section-number">5</span> Hypothesis testing with randomization</a></li>
<li><a class="" href="lab6.html"><span class="header-section-number">6</span> Confidence intervals with bootstrapping</a></li>
<li><a class="" href="lab7.html"><span class="header-section-number">7</span> The normal distribution</a></li>
<li><a class="" href="lab8.html"><span class="header-section-number">8</span> Inference for proportions</a></li>
<li><a class="" href="lab9.html"><span class="header-section-number">9</span> Inference about a mean</a></li>
<li><a class="" href="lab10.html"><span class="header-section-number">10</span> Inference for comparing two independent means</a></li>
<li><a class="" href="lab11.html"><span class="header-section-number">11</span> Inference for multiple independent groups</a></li>
<li><a class="" href="lab12.html"><span class="header-section-number">12</span> Explaining data with R</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/gregcox7/StatLabs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lab1" class="section level1" number="1">
<h1>
<span class="header-section-number">Lab 1</span> Exploring Data with R<a class="anchor" aria-label="anchor" href="#lab1"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="img/titanic.png" width="100%"></div>
<p>In this session, we will learn a bit about data and how to explore it using the statistical computing language called <code>R</code>. The point is to learn a bit more about data and variables and to get a feel for the power of the tools we will be learning to use in the rest of the semester.</p>
<p>Another point of today’s activity is to illustrate how even though statistics is about dealing with data, those data are <em>meaningful</em>. They are not just numbers or names, they are a peek into the world. They offer glimpses of someone’s life, of the workings of some natural process, of some social structure, etc. Any dataset will be limited in how wide of a glimpse it gives us. The point of statistics is to help us learn and make decisions based on that glimpse.</p>
<div id="working-with-r-and-rstudio" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Working with R and RStudio<a class="anchor" aria-label="anchor" href="#working-with-r-and-rstudio"><i class="fas fa-link"></i></a>
</h2>
<p>All of our labs will make use of the statistical computing language called “R”. The R language represents the current state of the art for statistical computing in both academic and industrial research. It is likely to remain relevant for many years to come because it is free and open-source, meaning both that it is widely accessible and that improvements and extensions are being made continuously by a large community of professionals and hobbyists. In fact, many of the best features of R that we will be using are extensions made by people outside the “core” development team for R. These extensions are called “packages”, and they represent bundles of code that are useful for doing statistics.</p>
<div id="using-packages" class="section level3" number="1.1.1">
<h3>
<span class="header-section-number">1.1.1</span> Using packages<a class="anchor" aria-label="anchor" href="#using-packages"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s load one of those packages now. This package is called <code>tidyverse</code> and is one that we will use for <em>every</em> lab activity in this course. The <code>tidyverse</code> package contains a lot of useful tools for summarizing data and making graphs.</p>
<p>The box below is called a “chunk” of code. They always begin and end with three back-quotes. There is also a little “{r}” at the beginning, which tells RStudio that the stuff in between the back-quotes is R code. Finally, there are a couple buttons in the upper-right of the chunk. The cog-wheel lets you set various options for a chunk, but we don’t need that for now. The downward-facing arrow above the line runs all the chunks of code <em>above</em> the current one. This can come in handy for later labs which involve multiple steps.</p>
<p>For now, though, all we need is the green rightward-facing arrow. Clicking this arrow will <em>run</em> the chunk of code. Run the chunk below to tell R to load a package called “tidyverse” from its “library” of packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<pre class="Rout text-info"><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre class="Rout text-info"><code>## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.8     ✔ dplyr   1.0.9
## ✔ tidyr   1.1.3     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
<pre class="Rout text-info"><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<p>You might see some messages from R about loading some helpful “packages” from its “library” that we will use. You may also notice some messages about “conflicts”, but these are nothing we need to worry about. As you’ll come to see, R often gives us more information than we really need, but it is usually trying to be helpful.</p>
</div>
<div id="chunks-of-code" class="section level3" number="1.1.2">
<h3>
<span class="header-section-number">1.1.2</span> Chunks of code<a class="anchor" aria-label="anchor" href="#chunks-of-code"><i class="fas fa-link"></i></a>
</h3>
<p>Our lab activities will involve writing and running chunks of code like the one we just used to load the <code>tidyverse</code> package. The chunk below tells R to add the numbers 2 and 3. Run the chunk to see the result.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">2</span> <span class="op">+</span> <span class="fl">3</span></code></pre></div>
<pre class="Rout text-muted"><code>## [1] 5</code></pre>
<p>Notice that there’s a mysterious “1” between two brackets in front of our answer. Why is that? It’s because R is telling us that “5” is the “first part” of our answer. Sometimes we will ask R to do things that give multiple answers at once, but this time we only asked it for one answer. This may seem pedantic, but it is just R trying to help by giving us more information than we really need at the moment.</p>
</div>
<div id="interactive-worksheets" class="section level3" number="1.1.3">
<h3>
<span class="header-section-number">1.1.3</span> Interactive worksheets<a class="anchor" aria-label="anchor" href="#interactive-worksheets"><i class="fas fa-link"></i></a>
</h3>
<p>Our labs make use of these interactive worksheets that allow us to mix English with computer code like we’ve just seen. Text like this is meant to give context and instruction to what you are doing in each lab. We work through the lab activities from beginning to end, i.e., from top to bottom. As we go, you will encounter <strong>Exercises</strong> like the one below which may require you to write and run some code, to write a response in English, or both.</p>
<p>After you’re done with each lab activity, you’ll need to turn in your worksheet on Blackboard. To do so, click the little arrow just to the right of the “Knit” button in the upper left area of the RStudio window and then click “Knit to PDF”. This will run all your chunks of code in the order they appear in your worksheet. It will then compile those results alongside the normal text in your worksheet into a single PDF document. You will then save this document and submit it on Blackboard.</p>
<hr>
</div>
<div id="exercise-1" class="section level3" number="1.1.4">
<h3>
<span class="header-section-number">1.1.4</span> Exercise 1<a class="anchor" aria-label="anchor" href="#exercise-1"><i class="fas fa-link"></i></a>
</h3>
<p>Now give it a try yourself! This is our first “exercise”. In most exercises, you will need to run a chunk of code and say something about the result. In this exercise, you’ll just be writing and running some small chunks of code. For each blank chunk below, write code to accomplish the given goal.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Tell R to add 5 and 7, then click the green arrow to run your chunk.</p></li>
<li><p>Tell R to subtract 10 from 33 (using <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code> for subtraction), then click the green arrow to run your chunk.</p></li>
<li><p>Tell R to multiply 4 and 20 (using <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> for multiplication), then click the green arrow to run your chunk.</p></li>
<li><p>Tell R to divide 10 by 3 (using <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code> for division), then click the green arrow to run your chunk.</p></li>
</ol>
<hr>
</div>
</div>
<div id="meet-your-data" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Meet your data<a class="anchor" aria-label="anchor" href="#meet-your-data"><i class="fas fa-link"></i></a>
</h2>
<p>The data we will be looking at for the rest of the activity are passenger records from the RMS <em>Titanic</em>, an ocean liner which famously sank on April 15, 1912. Passengers on the <em>Titanic</em> were divided into different “classes”, 1st, 2nd, and 3rd. Though the liner was not filled to capacity, lax safety precautions—including a failure to carry enough lifeboats—meant that many of her passengers died because they were unable to evacuate when the ship struck an iceberg. This was true for passengers regardless of class, but perhaps not <em>equally</em> true, as we shall see.</p>
<div id="load-the-data" class="section level3" number="1.2.1">
<h3>
<span class="header-section-number">1.2.1</span> Load the data<a class="anchor" aria-label="anchor" href="#load-the-data"><i class="fas fa-link"></i></a>
</h3>
<p>Run the following chunk of code to tell R to download our data into your current R environment.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/gregcox7/StatLabs/main/data/titanic.csv"</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-info"><code>## Rows: 1309 Columns: 11
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (7): residence, sex, name, ticket, cabin, embarked, hometown
## dbl (3): class, age, fare
## lgl (1): survived
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div id="check-out-the-variables" class="section level3" number="1.2.2">
<h3>
<span class="header-section-number">1.2.2</span> Check out the variables<a class="anchor" aria-label="anchor" href="#check-out-the-variables"><i class="fas fa-link"></i></a>
</h3>
<p>After running the chunk above, you should see something called <code>titanic</code> in your RStudio “Environment” in the upper right of the RStudio window. If you click on the word <code>titanic</code>, you can check out the data we have just loaded. Each row represents a specific passenger (“case”) and each column represents a different <em>variable</em>. Notice that there are some <em>missing values</em> that we don’t have for every passenger. These are labeled <code>NA</code>.</p>
<hr>
</div>
<div id="exercise-2" class="section level3" number="1.2.3">
<h3>
<span class="header-section-number">1.2.3</span> Exercise 2<a class="anchor" aria-label="anchor" href="#exercise-2"><i class="fas fa-link"></i></a>
</h3>
<p>This second exercise only involves a written response. Find an example of each of the following types of variable in the dataset. Explain your reasoning for each choice.</p>
<ol style="list-style-type: lower-alpha">
<li>Numerical (either discrete or continuous)</li>
</ol>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Ordinal categorical</li>
</ol>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Nominal categorical</li>
</ol>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<hr>
</div>
</div>
<div id="frequency-tables" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> Frequency tables<a class="anchor" aria-label="anchor" href="#frequency-tables"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we’ve gotten acquainted with the kind of data we have, we can begin using it to answer some questions. The questions we will attempt to answer are all about <em>who</em> survived and <em>who</em> perished on the <em>Titanic</em>. Answering these questions will involve simplifying the data, turning it into a summary form that makes it easier to see and understand patterns or trends. These summaries fall under the heading of “descriptive statistics”, because they are meant to <em>describe</em> important aspects of the data. The first type of summary we will use is a <strong>frequency table</strong>.</p>
<p>One way we could answer literally the question, “who survived and who died on the <em>Titanic</em>?” would be to read the names of each of the 1300 or so passengers in our dataset and sort them into piles, one pile for the people who survived and another pile for those who did not. Fortunately, computers are great at those kinds of tedious tasks! The chunk of code below gives a <strong>frequency table</strong> that counts the number of passengers who survived (for whom the value of the <code>survived</code> variable is <code>TRUE</code>) and the number of passengers who did not survive (for whom the value of the <code>survived</code> variable is <code>FALSE</code>). This summary will give us a sense of the scale of the disaster. The code below provides such a table.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">survived</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-muted"><code>## # A tibble: 2 × 2
##   survived     n
##   &lt;lgl&gt;    &lt;int&gt;
## 1 FALSE      809
## 2 TRUE       500</code></pre>
<p>We got a table that counted the number of people who did and did not survive. We went from 1300 or so rows with multiple variables each to just two numbers. A pretty concise summary! But how did we do it? Let’s break down that bit of code:</p>
<ul>
<li>
<code>titanic</code> is the name of our dataset.</li>
<li>
<code>group_by(survived)</code> tells R to group the cases in that dataset by whether they survived (<code>TRUE</code>) or not (<code>FALSE</code>).</li>
<li>
<code>summarize(n = n())</code> tells R to take our grouped cases and <em>summarize</em> them by counting the <code>n</code>umber of people in each group and labeling the resulting number “<code>n</code>”.</li>
<li>The funky symbol <code>%&gt;%</code> connects the three steps above and makes sure R does them in the order we want. This symbol is called a “pipe”.</li>
</ul>
<hr>
<div id="exercise-3" class="section level3" number="1.3.1">
<h3>
<span class="header-section-number">1.3.1</span> Exercise 3<a class="anchor" aria-label="anchor" href="#exercise-3"><i class="fas fa-link"></i></a>
</h3>
<p>To get a better understanding of how R interprets instructions like the chunk of code above, run each of the following chunks of code and provide a written response to the corresponding questions.</p>
<ol style="list-style-type: lower-alpha">
<li>This one changes <code>n = n()</code> in the last line to <code>Number = n()</code>. What has changed about the result R gives us?</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">survived</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>Number <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-muted"><code>## # A tibble: 2 × 2
##   survived Number
##   &lt;lgl&gt;     &lt;int&gt;
## 1 FALSE       809
## 2 TRUE        500</code></pre>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>This one changes <code>survived</code> to <code>class</code>. The result is another frequency table, but what are these frequencies of?</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">class</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-muted"><code>## # A tibble: 3 × 2
##   class     n
##   &lt;dbl&gt; &lt;int&gt;
## 1     1   323
## 2     2   277
## 3     3   709</code></pre>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>The following changes <code>survived</code> to <code>degree</code>, short for whether or not a passenger had a college degree. When you run the chunk below, it will give you an error. In your own words, why doesn’t it work?</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">degree</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-danger"><code>## Error in `group_by()`:
## ! Must group by variables found in `.data`.
## ✖ Column `degree` is not found.</code></pre>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>The following changes <code>n = n()</code> to <code>n = m()</code>. This will also result in an error. In your own words, describe why it doesn’t work.</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">survived</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">m</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-danger"><code>## Error in `summarize()`:
## ! Problem while computing `n = m()`.
## ℹ The error occurred in group 1: survived = FALSE.
## Caused by error in `m()`:
## ! could not find function "m"</code></pre>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<hr>
</div>
</div>
<div id="bar-charts" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> Bar charts<a class="anchor" aria-label="anchor" href="#bar-charts"><i class="fas fa-link"></i></a>
</h2>
<p>You may have heard that, when trying to evacuate the <em>Titanic</em>, there was a rule to put “women and children first” onto lifeboats. This suggests a <strong>hypothesis</strong>: <em>If</em> this rule was actually followed, <em>then</em> female passengers should have a higher survival rate than male passengers.</p>
<p>To see if the data are consistent with this hypothesis, we can begin by using code similar to what we’ve been using to count the number of male and female passengers who either did or did not survive. Notice that we can <code>group_by</code> more than one variable using a list of the variable names separated by commas:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">sex</span>, <span class="va">survived</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-info"><code>## `summarise()` has grouped output by 'sex'. You can override using the `.groups`
## argument.</code></pre>
<pre class="Rout text-muted"><code>## # A tibble: 4 × 3
## # Groups:   sex [2]
##   sex    survived     n
##   &lt;chr&gt;  &lt;lgl&gt;    &lt;int&gt;
## 1 Female FALSE      127
## 2 Female TRUE       339
## 3 Male   FALSE      682
## 4 Male   TRUE       161</code></pre>
<p>Now each row of the table tells us the number of passengers (in column <code>n</code>) that fall into categories defined by the <em>combination</em> of <code>sex</code> and <code>survived</code>. So the first row is the number of female passengers who did not survive, the second row is the number of female passengers who did survive, etc.</p>
<p>The table we just made contains all the information we need to test the hypothesis about whether women in fact survived at a higher rate than men. However, it is hard to compare male and female survival rates because there were different numbers of male and female passengers. This is a case where a visual summary would make it easier to compare the survival rate of male and female passengers.</p>
<p>Run the chunk of code below to tell R make a visual summary of the number of male and female survivors. The result is what we call a <strong>dodged bar plot</strong>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">sex</span>, fill <span class="op">=</span> <span class="va">survived</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-15-1.png" width="672"></div>
<p>Pretty neat! The height of each bar corresponds to the number of passengers of each combination of male/female and survived/not survived. The code we used is similar to what we’ve been using, but differs in some important ways:</p>
<ul>
<li>The first line is the same, telling R what dataset we are using (<code>titanic</code>).</li>
<li>The second line tells R that we want to make a <code>plot</code> and that we want to put the variable <code>sex</code> along the horizontal axis of that plot (the <code>x</code> axis). We are also telling R that we want to make multiple bars where they are <code>fill</code>ed with a different color depending on whether the people counted in that bar <code>survived</code>. The “gg” in front of “plot” refers to the “<strong>g</strong>rammar of <strong>g</strong>raphics”, which is the language R uses to describe plots. In this language, different parts of a plot are called “<strong>aes</strong>thetics”, which is why <code>x = sex</code> falls inside a parenthetical labeled <code>aes</code>(thetic).</li>
<li>The final line just tells R that we want to make a <code>bar</code> chart. In the grammar of graphics, different types of charts are called <code>geom</code>s. We also told R that we want the bars within each group to <code>dodge</code> one another. We will see different options in the next exercise.</li>
<li>Notice that the second 2 lines are connected by a <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> rather than the <code>%&gt;%</code> symbol. This is a historical accident, but the meaning of the two symbols is basically the same. Both of them are telling R the order in which it should follow our instructions.</li>
</ul>
<hr>
<div id="exercise-4" class="section level3" number="1.4.1">
<h3>
<span class="header-section-number">1.4.1</span> Exercise 4<a class="anchor" aria-label="anchor" href="#exercise-4"><i class="fas fa-link"></i></a>
</h3>
<p>Try running the following chunks of code. Each of them are different ways to make a bar chart of the number of male and female passengers who did or did not survive. After running each one, provide your response to the question below.</p>
<ol style="list-style-type: lower-alpha">
<li>In this one, we change <code>position = "dodge"</code> to <code>position = "stack"</code>. The result is a <strong>stacked bar plot</strong>. In your own words, what visual feature of the resulting graph tells you the total number of male and female passengers? What visual feature tells you how many of each of them survived?</li>
</ol>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">sex</span>, fill <span class="op">=</span> <span class="va">survived</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-16-1.png" width="672"></div>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>In this one, instead of using different colors to tell apart people who did or did not survive, we put male and female passengers into separate “facets”. How is the resulting graph similar or different to the dodged bar plot we made earlier?</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">survived</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="st">"sex"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-17-1.png" width="672"></div>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>The following graph swaps <code>sex</code> and <code>survived</code>. In your own words, describe a question that would be easier to answer using the graph below than it would using the graph we made just prior to this exercise.</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">survived</span>, fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-18-1.png" width="672"></div>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<hr>
</div>
</div>
<div id="histograms" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> Histograms<a class="anchor" aria-label="anchor" href="#histograms"><i class="fas fa-link"></i></a>
</h2>
<p>So far, we have been summarizing <em>categorical</em> variables. There are also some numerical variables in our data, including the age of each passenger. Let’s try running the chunk of code below to make a frequency table to figure out how many people of different ages sailed on the <em>Titanic</em>:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">group_by</span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">summarize</span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-muted"><code>## # A tibble: 99 × 2
##      age     n
##    &lt;dbl&gt; &lt;int&gt;
##  1 0.167     1
##  2 0.333     1
##  3 0.417     1
##  4 0.667     1
##  5 0.75      3
##  6 0.833     3
##  7 0.917     2
##  8 1        10
##  9 2        12
## 10 3         7
## # … with 89 more rows</code></pre>
<p>Well that’s not very helpful! R didn’t even bother to show us the whole thing. Though we can see something interesting: Age is measured in years, and for passengers at least one year old, their age is a whole number. But there are fractions of years for passengers less than a year old—these ages were <em>measured</em> in months rather than years.</p>
<p>The main point is that even though age can be measured in a more or less fine-grained manner, age is effectively <em>continuous</em>. We don’t want to know how many passengers were exactly 31.3491 years old or whatever. We want to get an overall sense of the <em>distribution</em> of ages across passengers.</p>
<p>We can construct a summary that conveys this information using a <strong>histogram</strong>. A histogram is very similar to a bar chart; the difference is that bar charts are for categorical variables while histograms are for numerical variables. Run the code below to construct a histogram to summarize passenger age:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-info"><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre class="Rout text-warning"><code>## Warning: Removed 263 rows containing non-finite values (stat_bin).</code></pre>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-20-1.png" width="672"></div>
<p>The resulting histogram shows a bunch of bars. Just like in a bar chart, the height of each bar indicates the number of passengers within a particular age range.</p>
<p>We got a couple of messages from R in addition to our plot, one about “non-finite values” and another about “picking a better value”. When R says, “non-finite values”, it is talking about people for whom their age was not recorded. This is an unfortunate thing about real data: sometimes it has missing pieces. This didn’t stop R from making the plot we wanted using the non-missing data, but R wanted to warn us just in case.</p>
<p>The message about “picking a better value” is important: When you make a histogram, you are looking at how many things fall within a particular range of values, say, between ages 4 and 8. How do you decide those ranges? If you don’t tell R how to do that, it will decide on its own to divide up the range of values into 30 “bins”, each of which corresponds to a range of values that is the same width. This is usually not what we want.</p>
<p>Instead, we should decide how big or small we want those ranges to be. The following code tells R to make our histogram using “bins” that are 2 years “wide” (0-1, 2-3, etc.):</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-warning"><code>## Warning: Removed 263 rows containing non-finite values (stat_bin).</code></pre>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-21-1.png" width="672"></div>
<p>And just like we did with bar charts, we can split a histogram into different “facets”. The pair of histograms below shows the distribution of ages of passengers that either did or did not survive:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="st">"survived"</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-warning"><code>## Warning: Removed 263 rows containing non-finite values (stat_bin).</code></pre>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-22-1.png" width="672"></div>
<hr>
<div id="exercise-5" class="section level3" number="1.5.1">
<h3>
<span class="header-section-number">1.5.1</span> Exercise 5<a class="anchor" aria-label="anchor" href="#exercise-5"><i class="fas fa-link"></i></a>
</h3>
<p>Use the chunk below to try making several different histograms of passenger age split by survival, using different bin widths of your own choice. Each time, just put in a new number after <code>binwidth =</code> and hit the green “Run” arrow on the upper right of the chunk to re-run the code and make a new graph.</p>
<p>After trying out several options, what bin width do you believe gives the best visual summary and why? Describe whether the shapes of the histograms in each facet are consistent with the “women and <em>children</em> first” rule.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">titanic</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="st">"survived"</span><span class="op">)</span></code></pre></div>
<pre class="Rout text-warning"><code>## Warning: Removed 263 rows containing non-finite values (stat_bin).</code></pre>
<div class="inline-figure"><img src="01-exploring_files/figure-html/unnamed-chunk-23-1.png" width="672"></div>
<p><strong>PROVIDE YOUR WRITTEN RESPONSE HERE</strong></p>
<hr>
</div>
</div>
<div id="wrap-up" class="section level2" number="1.6">
<h2>
<span class="header-section-number">1.6</span> Wrap-up<a class="anchor" aria-label="anchor" href="#wrap-up"><i class="fas fa-link"></i></a>
</h2>
<p>Today we began our adventure by using RStudio to explore some data. We saw how to look at data and how to summarize it in various helpful ways. These were frequency tables, proportions, bar charts, and histograms.</p>
<ul>
<li>Frequency tables count the number of times a particular value of a particular variable (or combination of values across multiple variables) occurs in our dataset.</li>
<li>Bar charts display counts of categorical variables in a visual form that makes it easier to compare them.</li>
<li>Histograms let us visually summarize counts of numerical variables by putting them in “bins”, the width of which we need to decide.</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="index.html">Overview</a></div>
<div class="next"><a href="lab2.html"><span class="header-section-number">2</span> Sampling</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#lab1"><span class="header-section-number">1</span> Exploring Data with R</a></li>
<li>
<a class="nav-link" href="#working-with-r-and-rstudio"><span class="header-section-number">1.1</span> Working with R and RStudio</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#using-packages"><span class="header-section-number">1.1.1</span> Using packages</a></li>
<li><a class="nav-link" href="#chunks-of-code"><span class="header-section-number">1.1.2</span> Chunks of code</a></li>
<li><a class="nav-link" href="#interactive-worksheets"><span class="header-section-number">1.1.3</span> Interactive worksheets</a></li>
<li><a class="nav-link" href="#exercise-1"><span class="header-section-number">1.1.4</span> Exercise 1</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#meet-your-data"><span class="header-section-number">1.2</span> Meet your data</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#load-the-data"><span class="header-section-number">1.2.1</span> Load the data</a></li>
<li><a class="nav-link" href="#check-out-the-variables"><span class="header-section-number">1.2.2</span> Check out the variables</a></li>
<li><a class="nav-link" href="#exercise-2"><span class="header-section-number">1.2.3</span> Exercise 2</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#frequency-tables"><span class="header-section-number">1.3</span> Frequency tables</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-3"><span class="header-section-number">1.3.1</span> Exercise 3</a></li></ul>
</li>
<li>
<a class="nav-link" href="#bar-charts"><span class="header-section-number">1.4</span> Bar charts</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-4"><span class="header-section-number">1.4.1</span> Exercise 4</a></li></ul>
</li>
<li>
<a class="nav-link" href="#histograms"><span class="header-section-number">1.5</span> Histograms</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-5"><span class="header-section-number">1.5.1</span> Exercise 5</a></li></ul>
</li>
<li><a class="nav-link" href="#wrap-up"><span class="header-section-number">1.6</span> Wrap-up</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/gregcox7/StatLabs/blob/master/01-exploring.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/gregcox7/StatLabs/edit/master/01-exploring.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Labs</strong>" was written by Greg Cox. It was last built on 2023-01-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
